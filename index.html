<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>FullPage 101 Template</title>

	<link rel="stylesheet" type="text/css" href="css/jquery.fullPage.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/pagePiling.js/1.5.4/jquery.pagepiling.css" />
	<style type="text/css">
		#menu {
			position: fixed;
			z-index: 9;
			width: 100%;
			list-style: none;
		}

		#menu li {
			text-align: center;
		}

		#buttonOff,
		#buttonOn {
		  font-size: 2em;
		  cursor: pointer;
		  top: 20px;
		}

		#buttonOff {
		  float: right;
			top: 50%;
		}
		#buttonOn {
		  left: 240px;
		}

		.modal,
		section.modal {
			display: none;
		}

		.modal.open {
			display: block;
			background: black;
			position: fixed;
			z-index: 99;
			width: 100%;
			height: 100%;
			opacity: .7;
		}

	</style>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<!-- This following line is optional. Only necessary if you use the option css3:false and you want to use other easing effects rather than "linear", "swing" or "easeInOutCubic". -->
	<!--<script src="vendors/jquery.easings.min.js"></script>-->


	<!-- This following line is only necessary in the case of using the option `scrollOverflow:true` -->
	<!--<script type="text/javascript" src="vendors/scrolloverflow.min.js"></script>-->
	<script type="text/javascript" src="js/jquery.fullPage.js"></script>
	<script type="text/javascript" src="js/jquery.fullpage.extensions.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pagePiling.js/1.5.4/jquery.pagepiling.js"></script>

	<script type="text/javascript">
	$(document).ready(function() {

		var slideIndex  = 1,
sliding     = false;
		$('#fullpage').fullpage({

		  sectionsColor: ['yellow', 'orange', '#C0C0C0', '#ADD8E6'],
		  scrollHorizontally: true
		  /*onLeave: function(index, nextIndex, direction) {
		  	 console.log(index);
		  	console.log(nextIndex);
		  	console.log(direction);
        if(index == 2 && !sliding) {

        		// if(direction == 'down' && slideIndex < 2)
            if(direction == 'down' && slideIndex < 2) {

                sliding = true;
                $.fn.fullpage.moveSlideRight();
                //slideIndex++;
                return false;

                // else if(direction == 'up' && slideIndex > 1)
            } else if(direction == 'up' && slideIndex >= 1) {

                sliding = true;
                $.fn.fullpage.moveSlideLeft();
                //slideIndex--;
                return false;

            }

        } else if(sliding) {

            return false;

        }

    },

    afterSlideLoad: function(anchorLink, index, slideAnchor, slideIndex) {

        sliding = false;

    }*/

		});


$(document).ready(function() {
	$('#pagepiling').pagepiling({
		direction: 'horizontal',
		sectionsColor: ['yellow', 'orange', '#C0C0C0', '#ADD8E6'],
		sectionSelector: '.section2',
	});
});

		//var $section2 = $('.section:eq(1)').detach();
		//var $section3 = $('.section:eq(2)').detach();

		//$($section2).appendTo('#fullpage');

		//adding the actions to the buttons
		$(document).on('click', '#buttonOn', function() {
		  $.fn.fullpage.setAllowScrolling(false);
		  $.fn.fullpage.setKeyboardScrolling(false);
		  $(this).parents('.section').find('.modal').addClass('open');
		});

		$(document).on('click', '#buttonOff', function() {
		  $.fn.fullpage.setAllowScrolling(true);
		  $.fn.fullpage.setKeyboardScrolling(true);
		  $(this).parents('.section').find('.modal').removeClass('open');
		});
	});
			
	</script>

  </head>
  <body>

	
<div id="pagepiling">
	<div class="section2">Some section</div>
	<div class="section2">Some section</div>
	<div class="section2">Some section</div>
	<div class="section2">Some section</div>
</div>
	<ul id="menu">
		<li data-menuanchor="page1"><a href="#page1">First slide</a></li>
		<li data-menuanchor="page2"><a href="#page2">Second slide</a></li>
		<li data-menuanchor="page3"><a href="#page3">Third slide</a></li>
		<li data-menuanchor="page4"><a href="#page4">Fourth slide</a></li>
	</ul>

  	<div id="fullpage">
	    <div class="section">Section one</div>

	    <div class="section">

	    	Section Two
	    	<div class="slide"> Slide 1 </div>
				<div class="slide"> Slide 2 
					<br><br><br><button id="buttonOn">Modal Open</button><div class="modal"><button id="buttonOff">Modal Off</button></div>
				</div>
				<div class="slide"> Slide 3 </div>
				<div class="slide"> Slide 4 </div>
	    </div>

	    <div class="section">
	      <div class="content">section 3</div>
	    </div>

	    <div class="section">
	      <div class="content">section 4</div>
	    </div>

	    <div class="section modal">
	      <div class="content">section 5</div>
	    </div>

	    <div class="section">
	      <div class="content">
	      	<div class="slide"> Slide 1 </div>
					<div class="slide">
						Slide 2
						<button id="buttonOn">Modal Open</button>
					</div>
					<div class="slide active"> Slide 3 </div>
					<div class="slide"> Slide 4
						<div id="fullpage">
							<div class="section">
				      	<div class="content">Three</div>
				    	</div>
					    <div class="section">
					      <div class="content">Three</div>
					    </div>
					  </div>
					</div>
	      </div>
	  	</div>

		</div>

  </body>
</html>